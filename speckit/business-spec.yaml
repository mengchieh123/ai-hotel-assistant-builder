name: hotel-booking-system
version: "2.1.0"
description: 飯店預訂管理系統業務規格書（台灣地區專用） - 適配 Railway 生產環境

# 系統關聯架構
system_relationships:
  core_dependencies:
    - 預訂系統 ↔ 房態系統 (雙向即時同步)
    - 預訂系統 ↔ 價格系統 (價格查詢與計算)
    - 預訂系統 ↔ 會員系統 (權益與折扣應用)
    - 預訂系統 ↔ 支付系統 (交易處理)
    - 房態系統 ↔ 價格系統 (供需動態定價)
    
  data_flows:
    - 會員註冊 → 發送歡迎優惠券 → 促進預訂
    - 預訂完成 → 更新房態 → 觸發價格調整
    - 入住記錄 → 更新會員等級 → 解鎖新權益
    - 促銷活動 → 影響預訂量 → 反饋至價格策略

# 業務領域定義
business_domains:
  預訂管理:
    description: "處理客房預訂全流程管理"
    capabilities:
      - "房型查詢與展示"
      - "預訂創建與確認"
      - "訂單狀態管理"
      - "取消與修改處理"
    
  房態管理:
    description: "實時房間狀態和可用性管理"
    capabilities:
      - "庫存實時更新"
      - "房型分配邏輯"
      - "維護狀態管理"
      - "超賣保護機制"
    
  價格管理:
    description: "動態價格策略和優惠管理"
    capabilities:
      - "多層次價格計算"
      - "促銷規則應用"
      - "會員折扣處理"
      - "季節性調整"
    
  會員管理:
    description: "會員體系和權益管理"
    capabilities:
      - "會員等級管理"
      - "權益計算與應用"
      - "積分系統管理"
      - "專屬優惠發放"
    
  促銷管理:
    description: "促銷活動和優惠券管理"
    capabilities:
      - "促銷活動創建"
      - "優惠券生成與驗證"
      - "目標客群設定"
      - "活動效果分析"

# 台灣地區特定業務規則
localization_tw:
  法定假日處理:
    - 春節期間: "價格係數 1.5倍，最少連住 2晚"
    - 清明連假: "價格係數 1.4倍"
    - 端午節: "價格係數 1.3倍"
    - 中秋節: "價格係數 1.3倍"
    - 雙十節: "價格係數 1.3倍"
  
  學生優惠規則:
    - 適用對象: "持有效台灣學生證之在學學生"
    - 折扣幅度: "平日 85折，假日 9折"
    - 驗證方式: "上傳學生證照片或現場查驗"
    - 黑名單防護: "防止優惠濫用機制"
  
  銀髮族優惠:
    - 適用年齡: "65歲以上長者"
    - 所需證件: "身份證或敬老卡"
    - 優惠內容: "全年 85折優惠"
    - 特殊權益: "優先樓層安排，無障礙設施"
  
  政府補助專案:
    - 國旅補助: "配合觀光局國民旅遊卡優惠"
    - 安心旅遊: "政府補助方案專用通道"
    - 企業特約: "台灣500大企業員工優惠"
    - 公教人員: "公務人員國民旅遊卡專案"

# 核心業務規則
core_business_rules:
  預訂規則:
    - 最少入住天數: 1天
    - 最長入住天數: 30天
    - 提前預訂時限: 最多365天前
    - 取消政策:
        免費取消: 入住前7天
        部分退款: 入住前3-7天(退50%)
        不可退款: 入住前3天內
    - 入住時間: 15:00後 (台灣標準)
    - 退房時間: 11:00前 (台灣常見)
    - 延遲退房: 每小時加收NT$200

  房態管理規則:
    - 庫存同步: 實時更新可用房間數
    - 超賣保護: 不允許超賣
    - 房型升級: 當原房型售完時可自動升級
    - 維護封房: 可臨時關閉特定房間
    - 最小連住房數: 連續日期可用性檢查

  價格計算規則:
    - 基礎價格: 房型基礎價格（新台幣）
    - 動態定價: 根據供需調整
    - 季節係數: 
        旺季: 1.3-1.5 (寒暑假、連續假期)
        平季: 1.0
        淡季: 0.8-0.9
    - 週末加成: 週五、六價格上浮20%
    - 促銷折扣: 會員折扣、促銷代碼
    - 稅金費用: 包含10%服務費及5%營業稅

  會員體系規則:
    - 會員等級:
        普通會員: 註冊即獲得
        銀卡會員: 累計入住10晚或消費NT$15,000
        金卡會員: 累計入住30晚或消費NT$45,000
        白金會員: 累計入住60晚或消費NT$90,000
    - 會員權益:
        折扣優惠: 銀卡5%、金卡8%、白金12%
        提前入住: 金卡以上可12:00入住
        延遲退房: 金卡以上可13:00退房
        積分累積: 每消費NT$100累積1點
        生日優惠: 當月入住享85折
        專屬禮遇: 迎賓水果、迷你吧免費
    - 積分規則:
        積分有效期: 2年
        積分兌換: 100點 = NT$50
        生日雙倍積分: 當月消費享雙倍積分

  促銷規則:
    - 早鳥優惠: 提前30天預訂享8折
    - 連住優惠: 
        3-4晚: 95折
        5-6晚: 9折
        7晚以上: 85折
    - 最後優惠: 當日預訂享7折
    - 學生專案: 憑學生證享85折
    - 銀髮專案: 65歲以上長者享85折
    - 企業合約: 簽約企業員工享專屬優惠

# 台灣支付系統整合
payment_integration_tw:
  信用卡支付:
    - 支持銀行: 中國信託、國泰世華、玉山銀行、台新銀行
    - 3D驗證: 強制開啟以符合台灣金管會規定
    - 分期付款: 3期、6期、12期零利率
  
  電子支付:
    - LINE Pay: "全功能支持，即時到帳"
    - 街口支付: "台灣本地電子錢包"
    - 台灣Pay: "政府推動的支付系統"
  
  超商付款:
    - 7-ELEVEN: "ibon機台繳費"
    - 全家: "FamiPort機台繳費"
    - 萊爾富: "Life-ET機台繳費"
    - OK超商: "OK‧go機台繳費"
  
  銀行轉帳:
    - 虛擬帳號: "自動生成一次性虛擬帳號"
    - 轉帳期限: "24小時內完成轉帳"
    - 對帳系統: "自動對帳，減少人工操作"

# 發票與稅務處理
invoice_tax_tw:
  發票類型:
    - 二聯式發票: "個人消費者使用"
    - 三聯式發票: "公司行號報帳使用"
    - 電子發票: "環保電子發票，符合政府政策"
  
  稅務處理:
    - 營業稅: "內含5%營業稅"
    - 住宿稅: "依各縣市規定代收"
    - 發票開立: "入住後7日內寄送"
  
  統一編號處理:
    - 公司報帳: "需提供統一編號"
    - 發票格式: "依公司要求調整"
    - 寄送方式: "Email或紙本郵寄"

# 個資保護與法規遵循
compliance_tw:
  個資法遵循:
    - 資料收集: "最小必要原則"
    - 資料保存: "依台灣個資法規定年限"
    - 資料銷毀: "定期清理過期個資"
    - 當事人權利: "查詢、更正、刪除個資權利"
  
  消費者保護:
    - 定型化契約: "符合台灣消保法規定"
    - 退款機制: "15日內完成退款"
    - 爭議處理: "專屬客服管道"
  
  旅遊業管理:
    - 觀光局登記: "合法旅館業登記"
    - 品質認證: "星級旅館評鑑"
    - 安全規範: "消防安全、建築安全"

# 環境適配配置
environment_config:
  current_environment: "Railway Production"
  deployment_constraints:
    - "內存限制: 512MB"
    - "無持久化數據庫"
    - "自動重啟機制"
    - "水平擴展支持"
  
  adaptation_strategies:
    - "使用內存緩存替代數據庫查詢"
    - "簡化業務流程適應無狀態架構"
    - "優先實現核心預訂場景"
    - "異步處理非關鍵業務邏輯"

# 版本演進計劃
version_roadmap:
  current_version: "v2.1.0 - 台灣本地化增強版"
  next_version: "v2.2.0 - 多語言支持"
  future_enhancements:
    - "多酒店管理支持"
    - "團體預訂功能"
    - "跨平台移動應用"
    - "AI推薦引擎"

# 維護與支持
maintenance_info:
  文檔維護:
    - 更新頻率: 每月審閱
    - 負責團隊: 產品管理部
    - 變更流程: PR審核機制
  
  技術支持:
    - 服務時間: 24/7
    - 響應時間: < 1小時
    - 問題升級路徑: 明確的升級流程
