name: hotel-booking-system
version: 1.0.0
description: 飯店預訂管理系統業務規格書（台灣地區）

# 新增：系統關聯架構
system_relationships:
  core_dependencies:
    - 預訂系統 ↔ 房態系統 (雙向即時同步)
    - 預訂系統 ↔ 價格系統 (價格查詢與計算)
    - 預訂系統 ↔ 會員系統 (權益與折扣應用)
    - 預訂系統 ↔ 支付系統 (交易處理)
    - 房態系統 ↔ 價格系統 (供需動態定價)
    
  data_flows:
    - 會員註冊 → 發送歡迎優惠券 → 促進預訂
    - 預訂完成 → 更新房態 → 觸發價格調整
    - 入住記錄 → 更新會員等級 → 解鎖新權益
    - 促銷活動 → 影響預訂量 → 反饋至價格策略

  business_process_chains:
    預訂生命週期:
      - 房型查詢(房態系統)
      - 價格計算(價格系統)
      - 會員驗證(會員系統)
      - 促銷應用(促銷系統)
      - 庫存鎖定(房態系統)
      - 支付處理(支付系統)
      - 訂單確認(預訂系統)
      - 通知發送(通知系統)

    會員升級流程:
      - 入住記錄累積(預訂系統)
      - 消費金額統計(支付系統)
      - 等級評估(會員系統)
      - 權益更新(會員系統)
      - 專屬優惠發放(促銷系統)

business_domains:
  - 預訂管理
  - 房態管理
  - 價格管理
  - 會員管理
  - 促銷管理
  - 支付處理
  - 報表分析

# 新增：跨領域業務規則
cross_domain_rules:
  預訂與房態關聯:
    - 預訂成立時立即鎖定對應房型庫存
    - 取消預訂時釋放庫存並重新計算可用房
    - 房型維護期間自動拒絕相關預訂請求
  
  會員與價格關聯:
    - 會員等級決定基礎折扣率
    - 會員專屬促銷可疊加使用
    - 生日當月預訂自動套用生日優惠
  
  促銷與庫存關聯:
    - 特定促銷活動綁定限量房型
    - 熱門時段促銷需保留最低庫存
    - 連住優惠需檢查連續日期房態

  支付與預訂狀態關聯:
    - 支付成功才確認預訂
    - 退款處理同步更新預訂狀態
    - 匯款待確認狀態保留庫存24小時

core_business_rules:
  預訂規則:
    - 最少入住天數: 1天
    - 最長入住天數: 30天
    - 提前預訂時限: 最多365天前
    - 取消政策:
        免費取消: 入住前24小時
        部分退款: 入住前12小時(退50%)
        不可退款: 入住前12小時內
    - 入住時間: 15:00後
    - 退房時間: 11:00前（台灣常見退房時間）

  房態管理規則:
    - 庫存同步: 實時更新可用房間數
    - 超賣保護: 不允許超賣
    - 房型升級: 當原房型售完時可自動升級
    - 維護封房: 可臨時關閉特定房間

  價格計算規則:
    - 基礎價格: 房型基礎價格（新台幣）
    - 動態定價: 根據供需調整
    - 季節係數: 淡旺季價格調整（寒暑假、連續假期）
    - 週末加成: 週五、六價格上浮
    - 促銷折扣: 會員折扣、促銷代碼
    - 政府稅金: 包含10%服務費及5%營業稅

  會員體系規則:
    - 會員等級:
        普通會員: 註冊即獲得
        銀卡會員: 累計入住10晚或消費NT$15,000
        金卡會員: 累計入住30晚或消費NT$45,000
        白金會員: 累計入住60晚或消費NT$90,000
    - 會員權益:
        折扣優惠: 銀卡5%、金卡8%、白金12%
        提前入住: 金卡以上可12:00入住
        延遲退房: 金卡以上可13:00退房
        積分累積: 每消費NT$100累積1點
        生日優惠: 當月入住享85折
        專屬禮遇: 迎賓水果、迷你吧免費

  促銷規則:
    - 早鳥優惠: 提前30天預訂享8折
    - 連住優惠: 連住3晚以上享9折
    - 最後優惠: 當日預訂享7折
    - 國旅補助: 配合觀光局國旅方案
    - 連續假期: 春節、端午、中秋專案
    - 學生專案: 憑學生證享優惠
    - 銀髮專案: 65歲以上長者優惠

# 新增：系統整合點關聯
integration_relationships:
  支付系統整合:
    - 信用卡: 預訂流程 → 支付閘道 → 訂單狀態更新
    - LINE Pay: LINE整合 → 快速支付 → 即時確認
    - 銀行匯款: 生成虛擬帳號 → 對帳系統 → 手動確認
  
  通知系統整合:
    - 預訂確認: 預訂系統 → Email/SMS/LINE
    - 會員權益: 會員系統 → 專屬優惠通知
    - 促銷推播: 促銷系統 → 目標客群行銷
  
  報表系統整合:
    - 每日營收: 支付系統 + 預訂系統 → 財務報表
    - 會員分析: 會員系統 + 預訂系統 → 行為分析
    - 房態統計: 房態系統 + 預訂系統 → 營運效率

workflows:
  預訂流程:
    steps:
      - 查詢可用房型（房態系統）
      - 選擇房型與日期
      - 輸入客人資訊（含身份證字號）
      - 選擇支付方式
      - 應用促銷代碼（促銷系統）
      - 計算總價格（價格系統）
      - 確認預訂
      - 發送確認通知（簡訊+LINE通知）

  會員註冊流程:
    steps:
      - 填寫基本資訊（姓名、手機、Email）
      - 驗證手機號碼
      - 註冊成功獲得普通會員
      - 發送歡迎禮包（優惠券）
      - 綁定LINE官方帳號

  促銷活動流程:
    steps:
      - 創建促銷活動
      - 設定活動規則
      - 設定目標客群
      - 上線活動
      - 透過LINE、Email推播
      - 監控活動效果
      - 活動結束分析

# 以下保持原有內容...
business_entities: [...]
business_metrics: [...]
integration_points: [...]
security_requirements: [...]
compliance_requirements: [...]
localization_features: [...]
